rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Drafts: Only allow authenticated users to read/write/update/delete drafts
    // Consider adding status checks if needed (e.g., only allow update if status is 'pending')
    match /drafts/{draftId} {
      allow read, write: if request.auth != null;
      // allow create: if request.auth != null;
      // allow update, delete: if request.auth != null;
    }

    // Published Articles: Allow anyone to read, but only authenticated users to create/update
    match /published_articles/{articleId} {
      allow read: if true; // Anyone can read published articles
      allow create: if request.auth != null; // Only logged-in users can create (publish)
      allow update: if request.auth != null; // Only logged-in users can update (republish)
      // allow delete: if request.auth != null; // Optional: Allow deletion if needed
    }

    // Add rules for other collections (e.g., users) if necessary
    // Example: match /users/{userId} { allow read, write: if request.auth.uid == userId; }

  }
}